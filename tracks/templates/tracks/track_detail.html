<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>{{ track.title }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-neutral-950 text-neutral-100">
<nav class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
    <a href="/" class="text-xl font-bold">Main Beats</a>
    <div class="space-x-4 text-sm">
        <a href="/catalog/" class="text-neutral-300 hover:text-white">Каталог</a>
        <a href="/order/?track={{ track.id }}"
           class="px-3 py-1 rounded-lg bg-orange-500 text-neutral-900 font-semibold hover:bg-orange-400">
            Замовити
        </a>
    </div>
</nav>

<main class="max-w-6xl mx-auto px-4 py-6">
    <a href="/catalog/" class="text-sm text-neutral-400 hover:text-white">← Назад до каталогу</a>

    <h1 class="mt-2 text-3xl md:text-4xl font-extrabold tracking-tight">{{ track.title }}</h1>

    <div class="mt-4 grid md:grid-cols-5 gap-6">
        <div class="md:col-span-3">
            <div class="aspect-video bg-black/40 rounded-2xl overflow-hidden border border-neutral-800">
                <iframe class="w-full h-full" src="{{ track.embed_url }}" title="{{ track.title|escape }}"
                        frameborder="0" allowfullscreen></iframe>
            </div>

            <!-- теги: female/male спочатку, кольорові -->
            <div class="mt-4 flex flex-wrap gap-2">
                {% for g in gender_tags %}
                <a href="/catalog/?genre={{ g.slug }}"
                   class="text-xs px-3 py-1.5 rounded-full border
                      {% if g.slug == 'female' %} bg-pink-500/20 text-pink-300 border-pink-400/30
                      {% else %} bg-sky-500/20 text-sky-300 border-sky-400/30 {% endif %}">
                    {{ g.name }}
                </a>
                {% endfor %}
                {% for g in other_tags %}
                <a href="/catalog/?genre={{ g.slug }}"
                   class="text-xs px-3 py-1.5 rounded-full bg-neutral-800 border border-neutral-700 hover:border-neutral-500">
                    {{ g.name }}
                </a>
                {% endfor %}
            </div>

            <div class="mt-5">
                <a href="/order/?track={{ track.id }}"
                   class="inline-block px-4 py-2 rounded-xl bg-orange-500 text-neutral-900 font-semibold hover:bg-orange-400">
                    Замовити цей трек
                </a>
            </div>

            <section class="mt-8">
                <h3 class="text-xl font-semibold mb-4">Ліцензії</h3>

                <!-- Автоматична плитка: картка мін. 240px, далі розтягується -->
                <div class="grid gap-4 [grid-template-columns:repeat(auto-fit,minmax(240px,1fr))]">

                    <!-- Non-exclusive -->
                    <a href="/order/?track={{ track.id }}&license=nonex"
                       class="block w-full h-full rounded-2xl border border-neutral-800 bg-neutral-900/70 p-6
              hover:border-neutral-600 hover:bg-neutral-900 transition-all duration-200">
                        <div class="text-neutral-300 text-sm">Non-exclusive</div>
                        <div class="mt-1 text-3xl font-extrabold leading-tight tracking-tight">від $100</div>
                        <p class="mt-2 text-sm leading-6 text-neutral-400 break-words">
                            WAV, трек лишається на YouTube-каналі
                        </p>
                    </a>

                    <!-- Exclusive -->
                    <a href="/order/?track={{ track.id }}&license=excl"
                       class="block w-full h-full rounded-2xl border border-neutral-800 bg-neutral-900/70 p-6
              hover:border-neutral-600 hover:bg-neutral-900 transition-all duration-200">
                        <div class="text-neutral-300 text-sm">Exclusive</div>
                        <div class="mt-1 text-3xl font-extrabold leading-tight tracking-tight">від $200</div>
                        <p class="mt-2 text-sm leading-6 text-neutral-400 break-words">
                            WAV, ховаю трек у себе
                        </p>
                    </a>

                    <!-- Exclusive+ (STEMS) -->
                    <a href="/order/?track={{ track.id }}&license=stems"
                       class="block w-full h-full rounded-2xl border border-neutral-800 bg-neutral-900/70 p-6
              hover:border-neutral-600 hover:bg-neutral-900 transition-all duration-200">
                        <div class="text-neutral-300 text-sm">Exclusive+ (STEMS)</div>
                        <div class="mt-1 text-3xl font-extrabold leading-tight tracking-tight">від $250</div>
                        <p class="mt-2 text-sm leading-6 text-neutral-400 break-words">
                            Exclusive + Розведені доріжки інструментів
                        </p>
                    </a>

                </div>
            </section>


        </div>

        <aside class="md:col-span-2">
            <h2 class="text-xl font-semibold mb-3">Схожі треки</h2>
            <div class="space-y-4">
                {% for r in related %}
                <article class="bg-neutral-900/60 border border-neutral-800 rounded-xl overflow-hidden">
                    <a href="{% url 'track_detail' slug=r.slug %}">
                        <div class="aspect-video bg-black/40">
                            <iframe class="w-full h-full" src="{{ r.embed_url }}" title="{{ r.title|escape }}"
                                    frameborder="0" allowfullscreen></iframe>
                        </div>
                        <div class="p-3">
                            <h3 class="font-medium hover:underline">{{ r.title }}</h3>
                        </div>
                    </a>
                </article>
                {% empty %}
                <p class="text-neutral-400 text-sm">Поки нема схожих.</p>
                {% endfor %}
            </div>
        </aside>

    </div>
</main>
</body>
</html>
